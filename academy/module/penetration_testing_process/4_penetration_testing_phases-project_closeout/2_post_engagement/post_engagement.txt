*** Post-Engagement
После помолвки
	
	- Подобно тому, как перед официальным началом взаимодействия (когда начинается
	тестирование) требуется значительная работа, мы должны выполнить множество
	действий (многие из которых являются обязательными по контракту) после
	завершения нашего сканирования, эксплуатации, горизонтального перемещения и
	постэксплуатационных действий. Не бывает двух одинаковых заданий, поэтому
	эти действия могут незначительно отличаться, но, как правило, должны быть
	выполнены для полного закрытия задания.
		
		~~~___ LIBK ___~~~ 0-PT-Process.png

	### Cleanup
	Очистка
		
		После завершения тестирования мы должны выполнить любую необходимую
		очистку, такую как удаление инструментов/скриптов,
		загруженных в целевые системы, отменить любые (незначительные) изменения
		конфигурации, которые мы могли сделать, и т. д. У нас должны быть
		подробные записи обо всех наших действиях, внесение любых мероприятия по
		очистке легко и эффективно. Если мы не можем получить доступ к системе,
		в которой необходимо удалить артефакт или отменить другое изменение, мы
		должны предупредить клиента и перечислить эти проблемы в приложениях к
		отчету. Даже если мы можем удалить любые загруженные файлы и отменить
		изменения (например, добавление учетной записи локального
		администратора), мы должны задокументировать эти изменения в приложениях
		к нашему отчету на случай, если клиент получит предупреждения, которые
		ему необходимо отследить, и подтвердить, что рассматриваемое действие
		было частью нашего санкционированного тестирования.

	### Documentation and Reporting
	Документация и отчетность
		
		Перед завершением оценки и отключением от внутренней сети клиента или
		отправкой электронных писем с уведомлением об окончании тестирования
		(что означает прекращение взаимодействия с хостами клиента), мы должны
		убедиться, что у нас есть соответствующая документация для всех выводов,
		которые мы планируем сделать. включить в наш отчет. Сюда входят выходные
		данные команды, снимки экрана, список затронутых хостов и все остальное,
		относящееся к клиентской среде или обнаружению. Мы также должны
		убедиться, что мы получили все результаты сканирования и журнала, если
		клиент размещал виртуальную машину в своей инфраструктуре для
		внутреннего теста на проникновение, и любые другие данные, которые могут
		быть включены как часть отчета или как дополнительная документация. Мы
		не должны хранить какую-либо личную информацию (PII), потенциально
		компрометирующую информацию или другие конфиденциальные данные, с
		которыми мы столкнулись во время тестирования.

		У нас уже должен быть подробный список результатов, которые мы включим в
		отчет, и все необходимые детали, чтобы адаптировать результаты к среде
		клиента. Результат нашего отчета (который подробно описан в модуле «
		Документация и отчетность ») должен состоять из следующего:
		
		https://academy.hackthebox.com/module/details/162

			[] Цепочка атак (в случае полной внутренней компрометации или доступа
			извне к внутреннему) с подробным описанием шагов, предпринятых для
			достижения компрометации.

			[] Сильное резюме, которое может понять нетехническая аудитория.

			[] Подробные выводы, характерные для среды клиента, включая рейтинг
			риска, выявление последствий, рекомендации по исправлению и
			высококачественные внешние ссылки, связанные с проблемой.

			[] Адекватные шаги для воспроизведения каждого обнаружения, чтобы
			команда, ответственная за исправление, могла понять и протестировать
			проблему, внося исправления.

			[] Ближайшие, средние и долгосрочные рекомендации, характерные для
			окружающей среды

			[] Приложения, которые включают в себя такую информацию, как целевая
			область, данные OSINT (если применимо к заданию), анализ взлома
			паролей (если применимо), обнаруженные порты/службы,
			скомпрометированные хосты, скомпрометированные учетные записи,
			файлы, переданные в системы, принадлежащие клиенту, любое создание
			учетной записи /системные модификации, анализ безопасности Active
			Directory (если применимо), соответствующие данные
			сканирования/дополнительная документация и любая другая информация,
			необходимая для дальнейшего объяснения конкретного вывода или
			рекомендации.


		На этом этапе мы создадим черновик отчета, который станет первым
		результатом, который получит наш клиент. Отсюда они смогут
		прокомментировать отчет и запросить любые необходимые
		разъяснения/изменения.

	### Report Review Meeting
	Совещание по обзору отчетов
		
		После того, как черновик отчета предоставлен, и у клиента была
		возможность распространить его внутри компании и подробно изучить,
		обычно проводится совещание по рассмотрению отчета, на котором
		обсуждаются результаты оценки. В совещании по рассмотрению отчета обычно
		участвуют одни и те же люди от клиента и фирмы, проводящей оценку. В
		зависимости от типов результатов клиент может привлечь дополнительных
		технических экспертов, если обнаружение связано с системой или
		приложением, за которое он отвечает. Как правило, мы не будем читать
		весь отчет слово в слово, а кратко пройдемся по каждому выводу и дадим
		объяснение с нашей точки зрения/опыта. У клиента будет возможность
		задать вопросы по любому поводу в отчете, попросить разъяснений или
		указать на проблемы, которые необходимо исправить. Часто клиент приходит
		со списком вопросов о конкретных результатах и не хочет
		подробно описывать каждый результат (например, с низким уровнем риска).

	### Deliverable Acceptance
	Принятие результата
		
		Объем работ должен четко определять приемку любых результатов проекта.
		При оценке тестов на проникновение, как правило, мы предоставляем отчет
		с пометкой DRAFTи дайте клиенту возможность просмотреть и
		прокомментировать. После того, как клиент отправил отзыв (т. е. ответы
		руководства, просьбы о разъяснениях/изменениях, дополнительные
		доказательства и т. д.) либо по электронной почте, либо (в идеале) во
		время собрания по рассмотрению отчета, мы можем выпустить ему новую
		версию отчета с пометкой FINAL. Некоторые аудиторские фирмы, которым
		клиенты могут быть обязаны, не примут отчет о тестировании на
		проникновение с DRAFTобозначение. Другим компаниям все равно, но лучше
		всего придерживаться единого подхода ко всем клиентам.

	### Post-Remediation Testing
	Тестирование после исправления
		
		Большинство обязательств включают тестирование после исправления как
		часть общей стоимости проекта. На этом этапе мы рассмотрим любую
		документацию, предоставленную клиентом, в которой указаны доказательства
		исправления или просто список исправлений. Нам потребуется повторно
		получить доступ к целевой среде и протестировать каждую проблему, чтобы
		убедиться, что она была устранена соответствующим образом. Мы выпустим
		отчет после исправления, в котором четко показано состояние среды до и
		после тестирования после исправления. Например, мы можем включить такую
		таблицу, как:

		# 	Определение серьезности 	Поиск названия 								Статус
		1 	Высокая 					SQL-инъекция 								Исправлено
		2 	Высокая 					Сломанная аутентификация 					Исправлено
		3 	Высокая 					Неограниченная загрузка файлов 				Исправлено
		4 	Высокая 					Неадекватная веб- и исходящая фильтрация 	Не исправлено
		5 	Середина 					Подписание SMB не включено 					Не исправлено
		6 	Низкий 						Список каталогов включен 					Не исправлено

		Для каждого обнаружения (где это возможно) мы хотим показать
		доказательства того, что проблема больше не присутствует в среде,
		посредством результатов сканирования или доказательства того, что
		исходные методы эксплуатации не сработали.

	### Role of the Pentester in Remediation
	Роль пентестера в исправлении ошибок
		
		- Поскольку тест на проникновение по сути является аудитом, мы должны
		оставаться беспристрастными третьими сторонами и не выполнять
		исправление наших результатов (например, исправление кода, исправление
		систем или внесение изменений в конфигурацию Active Directory). Мы
		должны поддерживать определенную степень независимости и можем выступать
		в качестве доверенных консультантов, давая общие рекомендации по
		исправлению того, как можно решить конкретную проблему, или быть
		доступными для дальнейшего объяснения/демонстрации обнаружения, чтобы
		команда, назначенная для ее устранения, имела лучшее понимание. Мы не
		должны сами вносить изменения или даже давать точные рекомендации по
		исправлению (например, для SQL Injection мы можем сказать «санировать
		пользовательский ввод», но не давать клиенту переписанный фрагмент
		кода). Это поможет сохранить объективность оценки и не допустить
		потенциального конфликта интересов в процессе.

	### Data Retention
	Хранение данных
		
		После завершения теста на проникновение у нас будет значительный объем
		данных, специфичных для клиента, таких как результаты сканирования,
		вывод журнала, учетные данные, снимки экрана и многое другое. Требования
		к хранению и уничтожению данных могут различаться в зависимости от
		страны и от фирмы к фирме, и процедуры, связанные с каждой из них,
		должны быть четко изложены на языке контракта в Объеме работ и Правилах
		взаимодействия. В соответствии с рекомендациями по тестированию на
		проникновение стандарта безопасности данных PCI (PCI DSS):
			
			https://www.pcisecuritystandards.org/documents/Penetration_Testing_Guidance_March_2015.pdf

			«Хотя в настоящее время нет требований PCI DSS относительно хранения
			доказательств, собранных тестер проникновения, рекомендуется, чтобы
			тестер сохранял такие доказательства (будь то внутренние для
			организации или стороннего поставщика) в течение определенного
			периода времени при рассмотрении любых местные, региональные законы
			или законы компании, которые необходимо соблюдать для сохранения
			доказательств. Эти доказательства должны быть доступным по запросу
			от целевого объекта или других уполномоченных органов, как это
			определено в правилах помолвка."

		Мы должны сохранять доказательства в течение некоторого времени после
		теста на проникновение в случае возникновения вопросов о конкретных
		выводах или для помощи в повторном тестировании «закрытых» выводов после
		того, как клиент выполнил действия по исправлению. Любые данные,
		оставшиеся после оценки, должны храниться в безопасном месте,
		принадлежащем и контролируемом фирмой, и храниться в зашифрованном виде.
		Все данные должны быть удалены из систем тестеров по завершении оценки.
		Должна быть создана новая виртуальная машина, специфичная для
		рассматриваемого клиента, для любого тестирования после исправления или
		исследования результатов, связанных с запросами клиента. 

	### Close Out
	Закрыть
		
		После того, как мы предоставили окончательный отчет, помогли клиенту с
		вопросами, касающимися исправления, и выполнили тестирование после
		исправления / выпустили новый отчет, мы можем, наконец, закрыть проект.
		На этом этапе мы должны убедиться, что любые системы, используемые для
		подключения к системам клиента или обработки данных, были стерты или
		уничтожены, а любые артефакты, оставшиеся после взаимодействия, надежно
		хранятся (зашифрованы) в соответствии с политикой нашей фирмы и
		договорными обязательствами перед нашим клиентом. . Последними шагами
		будут выставление счета клиенту и сбор оплаты за оказанные услуги.
		Наконец, всегда полезно после оценки провести опрос удовлетворенности
		клиентов, чтобы команда и руководство, в частности, могли увидеть, что
		было хорошо во время взаимодействия, а что можно было бы улучшить с
		точки зрения процессов компании и назначенного отдельного консультанта.
		к проекту. Обсуждения дальнейшей работы могут возникнуть через несколько
		недель или месяцев, если клиент был доволен нашей работой и повседневным
		взаимодействием.

		По мере того, как мы постоянно расширяем наш набор технических навыков,
		мы всегда должны искать способы улучшить наши социальные навыки и стать
		более всесторонними профессиональными консультантами. В конце концов,
		client will usually remember interactionsво время оценки, общения и
		того, как к ним относилась/оценивалась фирма, которую они привлекали,
		not the fancy exploit chain the pentester pulled off to pwn their
		systems. Используйте это время, чтобы поразмышлять над собой и
		поработать над постоянным улучшением всех аспектов вашей роли
		профессионального пентестера. 


