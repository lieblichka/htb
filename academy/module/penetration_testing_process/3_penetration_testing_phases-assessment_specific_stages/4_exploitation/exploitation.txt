*** Exploitation	
Эксплуатация

	- В течение ExploitationНа этом этапе мы ищем способы адаптации этих слабых
	сторон к нашему варианту использования для получения желаемой роли (т. е.
	точки опоры, эскалации привилегий и т. д.). Если мы хотим получить обратную
	оболочку, нам нужно изменить PoC для выполнения кода, чтобы целевая система
	подключалась к нам (в идеале) через зашифрованное соединение с указанным
	нами IP-адресом. Поэтому подготовка эксплойта является в основном частью
	Exploitationсцена.  
		
		~~~___ LINK ___~~~ 0-PT-Process-EX.png

		# Эти этапы не следует строго отделять друг от друга, так как они тесно
		связаны. Тем не менее, все же важно различать, в какой фазе мы
		находимся, и ее цель. Потому что позже, с гораздо более сложными
		процессами и гораздо большим количеством информации, очень легко
		потерять счет предпринятых шагов, особенно если тест на проникновение
		длится несколько недель и охватывает огромный объем. 

	### Prioritization of Possible Attacks
	Приоритизация возможных атак
		
		Как только мы нашли одну или две уязвимости во время Vulnerability
		Assessmentэтапе, который мы можем применить к нашей целевой
		сети/системе, мы можем расставить приоритеты для этих атак. Какой из
		этих атак мы придаем более высокий приоритет, чем другим, зависит от
		следующих факторов:
		
			
			# Вероятность успеха

			# Сложность

			# Вероятность повреждения

		Во-первых, нам необходимо оценить probability of successfullyвыполнение
		конкретной атаки против цели. CVSS Scoring может помочь нам в этом,
		используя калькулятор NVD для лучшего расчета конкретных атак и их
		вероятности успеха.
			
			https://nvd.nist.gov/vuln-metrics/cvss
			https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator

	
		- Complexityпредставляет собой попытку использования конкретной
		уязвимости. Это используется для оценки того, сколько времени, усилий и
		исследований требуется для успешного выполнения атаки на систему. Наш
		опыт играет здесь важную роль, потому что если мы собираемся провести
		атаку, которую никогда раньше не использовали, это логически потребует
		гораздо больше исследований и усилий, поскольку мы должны детально
		понять атаку и структуру эксплойта, прежде чем применять ее.

		Оценка probability of damageвызванное выполнением эксплойта, играет
		решающую роль, поскольку мы должны избегать любого повреждения целевых
		систем. Как правило, мы не проводим DoS-атаки, если они не требуются
		нашему клиенту. Тем не менее, мы всегда должны избегать атак на
		работающие службы с помощью эксплойтов, которые могут нанести ущерб
		программному обеспечению или операционной системе.

		Кроме того, мы можем присвоить этим факторам персональную систему
		баллов, что позволит более точно рассчитать оценку на основе наших
		навыков и знаний: 

		# Prioritization Example 
		Пример расстановки приоритетов 
			
			Фактор 						Точки 		Удаленное включение файлов 	Переполнение буфера
			1.Вероятность успеха 		10 			10 							8
			2.Сложность - Легко 		5 			4 							0
			3.Сложность — средняя 		3 			0 							3
			4.Сложность - Тяжело 		1 			0 							0
			5.Вероятность повреждения 	-5 			0 							-5
			Резюме 						max. 15 	14 							6

			Основываясь на приведенном выше примере, мы бы предпочли remote file
			inclusionатака. Его легко подготовить и выполнить, и при осторожном
			подходе он не должен причинить никакого вреда.

	### Preparation for the Attack
	Подготовка к атаке
		
		- Иногда мы сталкиваемся с ситуацией, когда мы не можем найти
		высококачественный, заведомо работающий код PoC-эксплойта.
		Следовательно, может потребоваться восстановить эксплойт локально на
		виртуальной машине, представляющей наш целевой хост, чтобы точно
		определить, что нужно адаптировать и изменить. После того, как мы
		настроили систему локально и установили известные компоненты для
		максимально точного отражения целевой среды (т. е. одинаковые номера
		версий для целевых служб/приложений), мы можем начать подготовку
		эксплойта, выполнив шаги, описанные в эксплойте. Затем мы тестируем это
		на локальной виртуальной машине, чтобы убедиться, что она работает и не
		наносит значительного ущерба. В других ситуациях мы столкнемся с
		неправильными конфигурациями и уязвимостями, которые мы видим очень
		часто и точно знаем, какой инструмент или эксплойт использовать, и
		является ли эксплойт или метод «безопасным» или может вызвать
		нестабильность.

		Если вы когда-нибудь сомневаетесь перед запуском атаки, всегда лучше
		проконсультироваться с нашим клиентом, предоставив ему все необходимые
		данные, чтобы он мог принять обоснованное решение о том, хотят ли они,
		чтобы мы попытались использовать его, или просто пометить обнаружение
		как проблему. Если они решат, что мы не будем продолжать эксплуатацию,
		мы можем отметить в отчете, что это не было активно подтверждено, но,
		вероятно, это проблема, которую необходимо решить. У нас есть
		определенная свобода действий во время тестов на проникновение, и мы
		всегда должны руководствоваться нашим здравым смыслом, если конкретная
		атака кажется слишком рискованной или потенциально может привести к
		нарушению работы. Если сомневаетесь, общайтесь. Ваш тимлид/менеджер,
		клиент, почти наверняка предпочтет дополнительное общение, чем
		столкнется с ситуацией, когда он пытается вернуть систему в оперативный
		режим после неудачной попытки эксплойта.

		После того, как мы успешно использовали цель и получили начальный доступ
		(и сделали четкие записи для наших отчетов и зарегистрировали все
		действия в нашем журнале действий!), мы перейдем к этапам
		постэксплуатации и бокового перемещения.

